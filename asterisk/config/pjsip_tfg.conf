; =====================================================================
; pjsip.conf - Configuración SIP para USUARIO (1001) y extensión lógica 2000
; Optimizado para Raspberry Pi + Whisper
; =====================================================================

[global]
type=global
max_forwards=70
user_agent=Asterisk

; =====================================================================
; TRANSPORTE UDP (Asterisk escucha en el host)
; =====================================================================
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060

; =====================================================================
; ENDPOINT 1001 (USUARIO)
; Este es el teléfono real que se registrará
; =====================================================================

; Endpoint 1001
[1001]
type=endpoint
transport=transport-udp
context=internal
disallow=all
allow=slin16,ulaw,alaw,gsm
preferred_codec_only=yes
auth=auth1001
aors=1001
direct_media=no
rewrite_contact=yes
force_rport=yes
rtp_symmetric=yes

; Autenticación del endpoint
[auth1001]
type=auth
auth_type=userpass
username=1001
password=clave1001     ; cámbialo por seguridad

; Registro del endpoint
[1001]
type=aor
max_contacts=1
remove_existing=yes

; =====================================================================
; ENDPOINT 2000 (lógico, para grabación Whisper)
; No recibe registro → solo existe para DialPlan
; =====================================================================

[2000]
type=endpoint
transport=transport-udp
context=internal
disallow=all
allow=slin16
aors=2000
direct_media=no
force_rport=yes
rewrite_contact=yes
rtp_symmetric=yes

[auth2000]
type=auth
auth_type=none

[2000]
type=aor
max_contacts=0
